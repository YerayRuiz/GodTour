{% extends "base.html" %}

{% block title %}Editando veh&iacute;culo{% endblock %}

{% block head %}
{{super()}}
<link rel="stylesheet" href="{{ url_for('static', filename='css/vehiculoStyles.css') }}">
{% endblock %}

{% block content %}
<div id="principal">
    <h1 style="text-align: center">Editando veh&iacute;culo</h1>
    {%if error%}
    <h2>{{error}}</h2>
    {%endif%}
    <div>
        {%if administrador is not none and administrador == 1 %}
        {% set admin = administrador %}
        {%else%}
        {%set admin = 0%}
        {%endif%}
        <form action="{{url_for('bpclient.update_vehiculo', id = vehiculo._id, administrador = admin)}}" method="POST"
            enctype="multipart/form-data">

            <label class="form-label">Marca: </label>
            <input type="text" class="form-control col-xs-3" id="marca" name="marca" value="{{vehiculo.marca}}"
                required></br>

            <label class="form-label">Modelo: </label>
            <input type="text" class="form-control col-xs-3" id="modelo" name="modelo" value="{{vehiculo.modelo}}"
                required></br>

            <label class="form-label">Matr&iacute;cula: </label>
            <input type="text" class="form-control col-xs-3" id="matricula" name="matricula"
                value="{{vehiculo.matricula}}" required></br>

            <label class="form-label">Color: </label>
            <input type="text" class="form-control col-xs-3" id="color" name="color" value="{{vehiculo.color}}"
                required></br>

            <label class="form-label">Plazas: </label>
            <input type="text" class="form-control col-xs-3" id="plazas" name="plazas" value="{{vehiculo.plazas}}"
                required></br>

            {% if vehiculo.fotos_vehiculo|count > 0 %}
            <div class="form-group row">
                <label class="col-form-label">Fotos guardadas:</label>
                {% for image_url in vehiculo.fotos_vehiculo %}
                <div class="col">
                    <img src="{{image_url}}" width="100" height="100" />
                    <input type="checkbox" value="{{image_url}}" name="imagenes" checked />
                </div>
                {% endfor %}
            </div>
            {% endif %}
            <div class="form-group row">
                <label for="fotos_vehiculo" class="col-form-label">AÃ±adir nuevas fotos del veh&iacute;culo</label>
                <div class="col-sm-10">
                    <input type="file" class="form-control" id="fotos_vehiculo" name="fotos_vehiculo"
                        multiple="multiple">
                </div>
            </div>
            <br>
            {%if admin == 1 and usuarios|count > 0%}
                <div class="form-group row">
                    <label for="usuario_seleccionado">Asignar veh&iacute;culo a usuario</label>
                    <div class="col-sm-10">
                        <select class="form-control" name="usuario_seleccionado" id="usuario_seleccionado">
                            {%for user in usuarios%}
                                <option value="{{user._id}}">{{user.nombre_completo}} - {{user.correo}}</option>
                            {%endfor%}
                        </select>
                    </div>
                    
                  </div>
            {%endif%}
            <div class="col text-center">
                <input class="btn btn-outline-info" type="submit" value="Guardar cambios ">
            </div>

        </form>
        <br>
    </div>
</div>
{% endblock %}